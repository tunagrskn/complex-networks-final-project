[General]
network = RingNetwork
sim-time-limit = 100s
cmdenv-express-mode = true
cmdenv-autoflush = true
cmdenv-status-frequency = 1s

# CRITICAL FIX: Multiple RNG streams for true randomness in anonymous election
# Each node should use its own RNG stream to ensure independent random choices
seed-set = ${repetition}
num-rngs = 32  # INCREASED from 1 to 32 to support up to 32 nodes
**.node[*].rng-0 = index

# Alternative: Use different seed for each run
# repeat = 10 means 10 different random seeds will be used

# Vector recording
**.vector-recording = true
**.scalar-recording = true

#
# Configuration 1: Ring Network with Arbitrary Election Algorithm
#
[Config RingNetwork]
network = RingNetwork
description = "Leader election in ring topology using flooding algorithm"
*.numNodes = 8
*.diameter = 4  # For ring: approximately n/2

[Config RingNetwork_Arbitrary]
network = RingNetwork_Arbitrary
description = "Ring topology with Arbitrary Election (flooding-based)"
*.numNodes = 8
*.diameter = 4

[Config RingNetwork_Anonymous]
network = RingNetwork_Anonymous
description = "Ring topology with Anonymous Election (randomized)"
*.numNodes = 8
repeat = 10  # Multiple runs with different seeds - IMPORTANT for randomness!
*.node[*].startDelay = uniform(0s, 0.1s)

#
# Configuration 2: Mesh Network with Both Algorithms
#
[Config MeshNetwork]
network = MeshNetwork
description = "Leader election in 2D mesh topology using flooding algorithm"
*.numNodes = 9
*.gridSize = 3
*.diameter = 4  # For 3x3 mesh: max distance from corner to corner

[Config MeshNetwork_Arbitrary]
network = MeshNetwork_Arbitrary
description = "Mesh topology with Arbitrary Election (flooding-based)"
*.numNodes = 9
*.gridSize = 3
*.diameter = 4

[Config MeshNetwork_Anonymous]
network = MeshNetwork_Anonymous
description = "Mesh topology with Anonymous Election (randomized)"
*.numNodes = 9
*.gridSize = 3
repeat = 10  # Multiple runs due to randomization

#
# Configuration 3: Star Network with Both Algorithms
#
[Config StarNetwork]
network = StarNetwork
description = "Leader election in star topology using flooding algorithm"
*.numNodes = 7
*.diameter = 2  # Star network always has diameter 2

[Config StarNetwork_Arbitrary]
network = StarNetwork_Arbitrary
description = "Star topology with Arbitrary Election (flooding-based)"
*.numNodes = 7
*.diameter = 2

[Config StarNetwork_Anonymous]
network = StarNetwork_Anonymous
description = "Star topology with Anonymous Election (randomized)"
*.numNodes = 7
repeat = 10  # Multiple runs due to randomization

#
# Configuration 4: Fully Connected Network with Both Algorithms
#
[Config FullyConnectedNetwork]
network = FullyConnectedNetwork
description = "Randomized leader election in fully connected network"
*.numNodes = 6
repeat = 10  # Multiple runs due to randomization

[Config FullyConnectedNetwork_Anonymous]
network = FullyConnectedNetwork_Anonymous
description = "Fully connected with Anonymous Election (randomized)"
*.numNodes = 6
repeat = 10

[Config FullyConnectedNetwork_Arbitrary]
network = FullyConnectedNetwork_Arbitrary
description = "Fully connected with Arbitrary Election (flooding-based)"
*.numNodes = 6
*.diameter = 1  # Fully connected has diameter 1

#
# Configuration 5: Larger Fully Connected Network
#
[Config FullyConnectedLarge]
network = FullyConnectedNetwork
description = "Randomized leader election in larger fully connected network"
*.numNodes = 10
repeat = 10

#
# Configuration 6: Random Network with Arbitrary Election Algorithm
#
[Config RandomNetwork]
network = RandomNetwork
description = "Leader election in random topology using flooding algorithm"
*.numNodes = 10
*.diameter = 5
*.connectivity = 0.3
repeat = 5  # Multiple runs due to random topology

#
# Configuration 7: High Connectivity Random Network
#
[Config RandomNetworkDense]
extends = RandomNetwork
description = "Leader election in dense random topology"
*.connectivity = 0.6

#
# Configuration 8: Performance Comparison - Ring with Both Algorithms
#
[Config RingComparison]
network = RingNetwork
description = "Compare performance across different ring sizes"
*.numNodes = ${N=4, 8, 12, 16, 20}
*.diameter = ${N}/2
repeat = 3

[Config RingComparison_Arbitrary]
network = RingNetwork_Arbitrary
description = "Compare Arbitrary algorithm performance across ring sizes"
*.numNodes = ${N=4, 8, 12, 16}
*.diameter = ${N}/2
repeat = 3

[Config RingComparison_Anonymous]
network = RingNetwork_Anonymous
description = "Compare Anonymous algorithm performance across ring sizes"
*.numNodes = ${N=4, 8, 12, 16}
repeat = 10

#
# Configuration 9: Topology Comparison - Same Algorithm
#
[Config TopologyComparison_Arbitrary]
description = "Compare Arbitrary algorithm across different topologies"
repeat = 5
*.numNodes = 8

# Run with different networks
[Config TopologyComparison_Arbitrary_Ring]
extends = TopologyComparison_Arbitrary
network = RingNetwork_Arbitrary
*.diameter = 4

[Config TopologyComparison_Arbitrary_Star]
extends = TopologyComparison_Arbitrary
network = StarNetwork_Arbitrary
*.numNodes = 7
*.diameter = 2

[Config TopologyComparison_Arbitrary_Mesh]
extends = TopologyComparison_Arbitrary
network = MeshNetwork_Arbitrary
*.numNodes = 9
*.gridSize = 3
*.diameter = 4

[Config TopologyComparison_Anonymous]
description = "Compare Anonymous algorithm across different topologies"
repeat = 10
*.numNodes = 8

[Config TopologyComparison_Anonymous_Ring]
extends = TopologyComparison_Anonymous
network = RingNetwork_Anonymous

[Config TopologyComparison_Anonymous_Star]
extends = TopologyComparison_Anonymous
network = StarNetwork_Anonymous
*.numNodes = 7

[Config TopologyComparison_Anonymous_Mesh]
extends = TopologyComparison_Anonymous
network = MeshNetwork_Anonymous
*.numNodes = 9
*.gridSize = 3

#
# Configuration 10: Performance Comparison - Fully Connected Sizes
#
[Config FCComparison]
network = FullyConnectedNetwork
description = "Compare randomized algorithm performance"
*.numNodes = ${N=4, 6, 8, 10, 12}
repeat = 20

#
# Configuration 11: TSN Realistic Scenario - Industrial Network
#
[Config IndustrialTSN]
network = MeshNetwork
description = "Simulate industrial TSN network with Grand Master election"
*.numNodes = 16
*.gridSize = 4
*.diameter = 6
*.node[*].startDelay = uniform(0s, 0.5s)
*.node[*].roundDelay = 0.3s

#
# Configuration 12: TSN Realistic Scenario - Automotive Network
#
[Config AutomotiveTSN]
network = RingNetwork
description = "Simulate automotive TSN ring network"
*.numNodes = 12
*.diameter = 6
*.node[*].startDelay = uniform(0s, 0.2s)
*.node[*].roundDelay = 0.1s

#
# Configuration 13: Debug/Test Configuration for Anonymous Election
# Use this to verify randomness is working correctly
#
[Config TestRandomness]
network = RingNetwork_Anonymous
description = "Test configuration to verify true randomness in anonymous election"
*.numNodes = 8
repeat = 20  # Run 20 times to see different leaders selected
sim-time-limit = 10s
cmdenv-express-mode = false  # See detailed output